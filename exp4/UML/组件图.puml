@startuml
title 点单程序网 — 系统架构组件图

skinparam {
  componentStyle rectangle
  shadowing false
  roundcorner 8
  defaultFontName "PingFang SC"
  defaultFontSize 12
  
  ' 简约配色
  PackageBorderColor #5D6D7E
  PackageBackgroundColor #F8F9FA
  ComponentBorderColor #34495E
  ComponentBackgroundColor #FFFFFF
  DatabaseBorderColor #7B7D7D
  DatabaseBackgroundColor #ECF0F1
  NodeBorderColor #85929E
  NodeBackgroundColor #F4F6F6
  ArrowColor #7F8C8D
  
  ' 边框粗细
  PackageBorderThickness 2
  ComponentBorderThickness 1.5
}

top to bottom direction

package "═══ 客户端层 ═══" {
  component "Web 前台" as WebFront {
    [顾客点单界面]
    [菜品浏览页面]
    [订单确认页面]
  }
  
  component "管理后台" as AdminPanel {
    [菜品管理]
    [库存调整]
    [订单查看]
  }
}

package "═══ 应用层 ═══" {
  component "API 网关" as Gateway {
    portin http
  }
}

package "═══ 业务逻辑层 ═══" {
  component "菜品服务\nMenuService" as MenuSvc
  component "订单服务\nOrderService" as OrderSvc
  component "库存服务\nInventoryService" as InvSvc
}

package "═══ 数据层 ═══" {
  database "MySQL\n关系型数据库" as DB {
    frame "核心表" {
      storage users
      storage dishes
      storage categories
      storage orders
      storage order_items
    }
  }
  
  node "对象存储\nOSS" as OSS
}

' 客户端到网关
WebFront -down-> Gateway : HTTPS
AdminPanel -down-> Gateway : HTTPS

' 网关到服务
Gateway -down-> MenuSvc
Gateway -down-> OrderSvc
Gateway -down-> InvSvc

' 服务到数据库
MenuSvc -down-> DB : 菜品数据
OrderSvc -down-> DB : 订单数据
InvSvc -down-> DB : 库存数据

' 服务到存储
MenuSvc -down-> OSS : 菜品图片

' 服务间调用
OrderSvc .right.> InvSvc : 库存校验

note right of WebFront
  <b>响应式设计</b>
  自适应 PC 与移动端
  统一代码库
end note

note left of AdminPanel
  <b>单级权限</b>
  管理员统一入口
  功能简洁实用
end note

note bottom of DB
  <b>数据设计原则</b>
  • 关系型数据库保证一致性
  • 库存扣减使用事务机制
  • 订单与订单明细关联设计
end note

@enduml
